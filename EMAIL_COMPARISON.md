# 📧 邮件功能对比说明

## 测试邮件 vs 每日选股邮件

### 🔧 测试邮件 (test_email.yml)

**触发方式**：
- 手动触发（workflow_dispatch）
- 用于验证邮件配置是否正确

**邮件内容**：
```json
[
    {
        "code": "000001",
        "name": "平安银行",
        "score": 85.5,
        "price": 12.34,
        "market_cap": 1234.5,
        "reasons": ["技术指标优秀", "基本面良好"]
    }
]
```

**特点**：
- ✅ 使用固定的测试数据
- ✅ 内容简单，只有1只股票
- ✅ 用于验证邮件发送功能
- ✅ 不会影响实际选股结果

### 📈 每日选股邮件 (scheduled_selection.yml)

**触发方式**：
- 自动定时触发（每天9:35、12:00、16:00，周一至周五）
- 手动触发（workflow_dispatch）

**邮件内容**：
- 真实的选股结果数据
- 基于当天的市场数据
- 包含多只推荐股票（通常5-10只）
- 每只股票都有详细的评分和推荐理由

**特点**：
- ✅ 使用实时市场数据
- ✅ 内容丰富，包含多只股票
- ✅ 基于真实的量化分析结果
- ✅ 每天自动运行并发送

## 📋 邮件内容对比

| 项目 | 测试邮件 | 每日选股邮件 |
|------|----------|--------------|
| **数据来源** | 固定测试数据 | 实时市场数据 |
| **股票数量** | 1只 | 5-10只 |
| **评分** | 固定85.5分 | 真实计算得分 |
| **价格** | 固定12.34元 | 实时市场价格 |
| **市值** | 固定1234.5亿 | 实时市值数据 |
| **推荐理由** | 固定文本 | 基于实际分析 |
| **发送频率** | 手动触发 | 每日自动 |
| **用途** | 功能验证 | 实际投资参考 |

## 🎯 邮件模板

两种邮件使用相同的HTML模板，包含：

### 📧 邮件结构
1. **标题**：📈 每日选股推荐 - 2025-01-XX
2. **策略信息**：四维综合分析策略
3. **股票表格**：
   - 序号
   - 股票代码
   - 股票名称
   - 综合得分
   - 当前价格
   - 市值
   - 推荐理由
4. **风险提示**：投资有风险，入市需谨慎
5. **生成信息**：时间戳和系统标识

### 🎨 样式特点
- 渐变背景的标题栏
- 响应式表格设计
- 醒目的得分显示（红色加粗）
- 专业的风险提示框
- 清晰的页脚信息

## ⚙️ 配置对比

### 测试邮件配置
```yaml
# .github/workflows/test_email.yml
TEST_CONFIG = {
    'smtp_server': 'smtp.qq.com',
    'smtp_port': 465,
    'use_tls': False,
    'subject_template': '📈 GitHub Actions测试 - {date}'
}
```

### 每日选股邮件配置
```yaml
# .github/workflows/scheduled_selection.yml
EMAIL_CONFIG = {
    'smtp_server': 'smtp.qq.com',
    'smtp_port': 465,
    'use_tls': False,
    'subject_template': '📈 每日选股推荐 - {date}'
}
```

## 🚀 使用建议

### 首次设置
1. 先运行测试邮件，验证配置正确
2. 确认收到测试邮件后，再启用每日选股

### 日常使用
- 测试邮件：仅在配置变更时使用
- 每日选股邮件：每天自动运行3次（9:35、12:00、16:00），无需手动操作

### 故障排除
- 如果每日选股邮件失败，先运行测试邮件检查配置
- 查看GitHub Actions日志获取详细错误信息

## 📊 邮件示例

### 测试邮件示例
```
📈 GitHub Actions测试 - 2025-01-XX

策略: 四维综合分析策略
日期: 2025年01月XX日

今日推荐股票 (1只)
┌─────┬──────────┬──────────┬──────┬────────┬──────────┬────────────┐
│序号 │代码      │名称      │得分  │价格    │市值      │推荐理由    │
├─────┼──────────┼──────────┼──────┼────────┼──────────┼────────────┤
│1    │000001    │平安银行  │85.5  │12.34   │1234.5亿  │技术指标优秀│
└─────┴──────────┴──────────┴──────┴────────┴──────────┴────────────┘
```

### 每日选股邮件示例
```
📈 每日选股推荐 - 2025-01-XX

策略: 四维综合分析策略
日期: 2025年01月XX日

今日推荐股票 (8只)
┌─────┬──────────┬──────────┬──────┬────────┬──────────┬────────────┐
│序号 │代码      │名称      │得分  │价格    │市值      │推荐理由    │
├─────┼──────────┼──────────┼──────┼────────┼──────────┼────────────┤
│1    │000001    │平安银行  │92.3  │15.67   │1456.8亿  │技术指标优秀│
│2    │000002    │万科A     │89.7  │18.92   │2345.6亿  │基本面良好  │
│3    │600036    │招商银行  │88.4  │42.15   │3456.7亿  │综合评分高  │
│...  │...       │...       │...   │...     │...       │...         │
└─────┴──────────┴──────────┴──────┴────────┴──────────┴────────────┘
```

## 🔄 更新日志

- **2025-01-XX**: 统一SMTP配置，使用465端口+SSL
- **2025-01-XX**: 添加详细的邮件对比文档
- **2025-01-XX**: 优化邮件模板和样式
- **2025-01-XX**: 更新定时触发时间，改为每天9:35、12:00、16:00（北京时间） 