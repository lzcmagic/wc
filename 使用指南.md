# 个人A股选股系统 - 使用指南

## 🚀 快速开始

### 1. 环境准备

#### Python环境
- Python 3.8+ (推荐 3.9+)
- pip 包管理工具

#### 安装依赖
```bash
# 安装Python依赖包
pip install -r requirements.txt

# 如果遇到安装问题，可以使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

#### 特殊依赖说明
如果安装 `talib` 遇到问题：

**Windows:**
```bash
# 下载并安装预编译包
pip install https://download.lfd.uci.edu/pythonlibs/archived/TA_Lib-0.4.24-cp39-cp39-win_amd64.whl
```

**Linux/Mac:**
```bash
# 先安装系统依赖
sudo apt-get install build-essential
# 或者 brew install ta-lib (Mac)

# 然后安装Python包
pip install talib
```

### 2. 初始化配置

```bash
# 初始化配置文件
python config.py
```

这将创建以下文件和目录：
- `user_config_template.py` - 配置模板
- `results/` - 选股结果存储目录
- `logs/` - 日志文件目录

### 3. 个性化配置

将 `user_config_template.py` 复制为 `user_config.py` 并修改：

```python
"""
用户自定义配置文件
"""

# 邮件通知配置（可选）
EMAIL_CONFIG = {
    'enabled': True,  # 开启邮件通知
    'username': 'your_email@gmail.com',     # 发送邮箱
    'password': 'your_app_password',        # 邮箱应用密码
    'to_email': 'your_email@gmail.com',     # 接收邮箱
}

# 选股参数调整
STOCK_FILTER = {
    'min_market_cap': 3000000000,  # 降低市值要求到30亿
    'max_recent_gain': 40,         # 允许更高涨幅
    'min_score': 65,               # 降低评分要求
    'max_stocks': 8,               # 推荐8只股票
}
```

## 📈 使用方法

### 1. 命令行使用

```bash
# 立即执行一次选股
python main.py run

# 启动定时任务（每日自动选股）
python main.py schedule

# 运行测试模式
python main.py test

# 查看历史结果
python main.py history --days 7

# 初始化配置
python main.py config
```

### 2. Web界面使用

```bash
# 启动Web服务
python web_app.py
```

然后在浏览器中访问：`http://127.0.0.1:5000`

### 3. 测试运行

```bash
# 快速测试几只知名股票
python stock_selector.py test
```

## 📊 功能说明

### 核心选股指标

1. **MACD指标 (25%权重)**
   - 金叉信号：25分
   - 零轴上方：15分

2. **RSI指标 (20%权重)**
   - 超卖反弹：25分
   - 正常范围(30-70)：20分

3. **KDJ指标 (20%权重)**
   - 金叉且J值<80：20分

4. **布林带 (15%权重)**
   - 接近下轨反弹：15分
   - 突破中轨：12分

5. **成交量 (10%权重)**
   - 近3日放大1.5倍：10分

6. **均线 (10%权重)**
   - 多头排列：10分

### 筛选条件

- 流通市值 > 50亿
- 近30日涨幅 < 30%
- 排除ST股票
- 排除退市风险股

### 评分机制

- 总分100分
- 默认推荐评分≥70分的股票
- 按评分从高到低排序
- 最多推荐10只股票

## 📧 邮件通知设置

### Gmail设置示例

1. 开启两步验证
2. 生成应用专用密码
3. 配置如下：

```python
EMAIL_CONFIG = {
    'enabled': True,
    'smtp_server': 'smtp.gmail.com',
    'smtp_port': 587,
    'username': 'your_email@gmail.com',
    'password': 'your_app_password',  # 应用专用密码
    'to_email': 'your_email@gmail.com',
    'use_tls': True
}
```

### 163邮箱设置示例

```python
EMAIL_CONFIG = {
    'enabled': True,
    'smtp_server': 'smtp.163.com',
    'smtp_port': 587,
    'username': 'your_email@163.com',
    'password': 'your_auth_code',  # 授权码，非登录密码
    'to_email': 'your_email@163.com',
    'use_tls': True
}
```

## ⏰ 定时任务

### 默认设置
- 每个工作日上午9:30执行
- 可以通过配置文件修改时间

### 修改运行时间
```python
from datetime import time

SCHEDULE_CONFIG = {
    'enabled': True,
    'run_time': time(9, 45),  # 改为9:45执行
    'weekdays_only': True,
}
```

### 手动启动定时任务
```bash
python main.py schedule
```

按 `Ctrl+C` 停止定时任务。

## 📁 文件结构

```
个人选股系统/
├── main.py                    # 主程序入口
├── stock_selector.py          # 选股策略
├── data_fetcher.py           # 数据获取
├── indicators.py             # 技术指标计算
├── config.py                 # 配置管理
├── web_app.py               # Web界面
├── requirements.txt          # 依赖包列表
├── user_config.py           # 用户配置（需创建）
├── results/                 # 选股结果
│   └── stock_selection_2024-01-15.json
├── logs/                    # 日志文件
│   └── stock_selector.log
└── 文档/
    ├── README.md
    ├── personal_stock_selector.md
    └── 使用指南.md
```

## 🎯 使用场景

### 每日选股流程

1. **早晨9:30** - 系统自动执行选股
2. **9:35** - 收到邮件推荐结果（如已配置）
3. **开盘前** - 查看推荐股票进行分析
4. **交易时间** - 结合基本面做投资决策

### 手动分析
```bash
# 立即执行选股分析
python main.py run

# 查看Web界面结果
python web_app.py
# 访问 http://127.0.0.1:5000
```

### 历史回顾
```bash
# 查看近7天推荐记录
python main.py history --days 7
```

## ⚠️ 重要提示

### 风险警告
1. **本系统仅供学习和参考**
2. **不构成任何投资建议**
3. **股市有风险，投资需谨慎**
4. **请结合基本面分析**
5. **严格控制投资仓位**

### 技术指标局限性
1. **滞后性** - 技术指标基于历史数据
2. **假信号** - 可能出现错误信号
3. **市场环境** - 大盘走势影响个股表现

### 使用建议
1. **多维度分析** - 结合基本面、消息面
2. **分散投资** - 不要集中持仓
3. **止损止盈** - 设置合理的风险控制
4. **持续学习** - 不断完善投资知识

## 🔧 常见问题

### Q: 安装依赖失败怎么办？
A: 
1. 确保Python版本3.8+
2. 使用国内镜像源
3. 单独安装问题包
4. 查看错误日志

### Q: 没有推荐股票怎么办？
A:
1. 降低评分阈值 (min_score)
2. 增加样本大小 (sample_size)
3. 放宽筛选条件
4. 检查数据获取是否正常

### Q: 邮件发送失败？
A:
1. 检查邮箱配置
2. 确认应用密码正确
3. 检查网络连接
4. 查看错误日志

### Q: 如何调整选股策略？
A:
1. 修改 user_config.py 中的参数
2. 调整技术指标权重
3. 修改筛选条件
4. 重启系统生效

## 📞 技术支持

如果遇到问题：

1. 查看日志文件 `logs/stock_selector.log`
2. 检查配置文件是否正确
3. 确认网络连接正常
4. 验证数据源可用性

## 🎉 开始使用

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 初始化配置
python config.py

# 3. 配置个人设置
cp user_config_template.py user_config.py
# 编辑 user_config.py

# 4. 测试运行
python main.py test

# 5. 执行选股
python main.py run

# 6. 启动Web界面（可选）
python web_app.py
```

祝您投资顺利！🚀 